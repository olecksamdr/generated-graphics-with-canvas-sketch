{"version":3,"sources":["node_modules/browser-pack/_prelude.js","main.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/object-assign/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/right-now/browser.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-promise/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-object/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-window/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-dom/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/util.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/object-keys/isArguments.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/object-keys/implementation.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/object-keys/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-arguments/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/object-is/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/function-bind/implementation.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/has/src/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/function-bind/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-regex/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/define-properties/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/regexp.prototype.flags/implementation.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/regexp.prototype.flags/polyfill.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/regexp.prototype.flags/shim.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/regexp.prototype.flags/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/is-date-object/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/deep-equal/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/repeat-string/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/dateformat/lib/dateformat.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/pad-left/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/save.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/accessibility.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/paper-sizes.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/defined/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/convert-length/convert-length.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/distances.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/core/resizeCanvas.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/node_modules/get-canvas-context/index.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/core/createCanvas.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/core/SketchManager.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/core/keyboardShortcuts.js","node_modules/canvas-sketch/dist/node_modules/canvas-sketch/lib/canvas-sketch.js","premitives/Line.js","premitives/Shape.js","utils/arrayFrom.js","utils/easing.js","utils/fadeOutOpacity.js","utils/getImageData.js","canvas-sketch-cli/injected/storage-key.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_canvasSketch","_interopRequireDefault","_Line","_Shape","_arrayFrom","_getImageData","default","width","height","lines","shapes","imageUrl","precision","then","imageData","x","y","Math","random","push","PERCISION","context","playhead","fillStyle","clearRect","fillRect","save","translate","forEach","line","rotate","angle","draw","restore","shape","dimensions","duration","animate","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","objectAssign","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","TypeError","toObject","s","arguments","key","browser","commonjsGlobal","performance","now","Date","isPromise_1","obj","isObject","isWindow","window","isDom","Node","nodeType","nodeName","getClientAPI","defined","arguments$1","isBrowser","document","keysShim","toStr","toString","isArguments","value","str","isArgs","callee","has","toStr$1","isEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","ctor","constructor","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","k","object","isFunction","isArguments$$1","isString","theKeys","skipProto","j","name","skipConstructor","equalsConstructorPrototypeIfNotBuggy","slice","Array","origKeys","keysShim$1","originalKeys","shim","args","objectKeys","hasToStringTag","Symbol","toStringTag","toStr$2","isStandardArguments","isLegacyArguments","supportsStandardArguments","isArguments$1","NumberIsNaN","objectIs","b","slice$1","toStr$3","src","Function","bind","that","this","bound","boundLength","max","boundArgs","result","apply","concat","Empty","regexExec","RegExp","exec","gOPD","getOwnPropertyDescriptor","toStr$4","hasToStringTag$1","isRegex","descriptor","lastIndex","tryRegexExecCall","hasSymbols","toStr$5","origDefineProperty","defineProperty","supportsDescriptors","_","enumerable","arePropertyDescriptorsSupported","predicate","fn","configurable","writable","defineProperties","predicates","props","defineProperties_1","toObject$1","TypeErr","implementation$2","global","ignoreCase","multiline","dotAll","unicode","sticky","supportsDescriptors$1","gOPD$1","TypeErr$1","polyfill","flags","get","supportsDescriptors$2","gOPD$2","defineProperty$1","TypeErr$2","getProto","getPrototypeOf","regex","flagsBound","getPolyfill","implementation","polyfill$$1","proto","regexp_prototype_flags","getDay","toStr$6","hasToStringTag$2","isDateObject","tryDateObject","getTime","deepEqual","actual","expected","options","opts","strict","isUndefinedOrNull","aIsRegex","bIsRegex","aIsBuffer","isBuffer","bIsBuffer","ka","kb","sort","objEquiv","copy","cache","deepEqual_1","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","undefined","isArray","toLowerCase","test","isNaN","maskSlice","masks","d","D","m","H","M","L","getTimezoneOffset","W","targetThursday","getFullYear","getMonth","getDate","setDate","firstThursday","ds","setHours","getHours","floor","getWeek","N","dow","getDayOfWeek","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","round","timeNames","tt","T","TT","Z","match","pop","replace","abs","S","len","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","expiresHeaderFormat","res","repeatString","num","substr","link","padLeft","ch","noop","defaultExts","extension","prefix","suffix","supportedEncodings","stream","isStart","Promise","resolve","reject","filename","resolveFilename","frame","func","client","output","ev","saveDataURL","dataURL","splitIndex","indexOf","base64","byteString","atob","type","mimeMatch","mime","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","createBlobFromDataURL","blob","saveBlob","createElement","style","visibility","download","href","URL","createObjectURL","body","appendChild","onclick","setTimeout","revokeObjectURL","parentElement","removeChild","removeAttribute","click","opt","file","totalFrames","layerStr","isFinite","totalLayers","layer","filter","Boolean","timeStamp","hash","commonTypos","dimension","animated","animating","unit","P5","pixellated","looping","pixelPerInch","allKeys","checkSettings","settings","console","warn","includes","paperSizes","reduce","dict","preset","item","units","defined$1","conversions","system","factor","cm","pt","pc","in","ft","anchors","metric","ratio","imperial","convertLength","fromUnit","toUnit","pixelsPerInch","roundPixel","toFactor","fromFactor","isToPixel","fromUnitData","toUnitData","anchor","decimals","Number","convertDistance$1","unitsFrom","unitsTo","resizeCanvas","styleWidth","styleHeight","canvasWidth","canvasHeight","hasDimensions","checkIfHasDimensions","exporting","scaleToFit","scaleToView","pixelRatio","exportPixelRatio","bleed","devicePixelRatio","basePixelRatio","maxPixelRatio","min","trimWidth","trimHeight","ref","element","parent","innerWidth","innerHeight","getBoundingClientRect","getParentSize","parentWidth","parentHeight","getDimensionsFromPreset","highest","lowest","orientation","landscape","realWidth","realHeight","aspect","windowAspect","scaleToFitPadding","maxWidth","maxHeight","getCanvasContext_1","canvas","gl","attribs","names","getContext","createCanvas","ownsCanvas","newCanvas","createCanvasElement","attributes","pixelated","imageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","SketchManager","_settings","_props","_sketch","_raf","_lastRedrawResult","_isP5Resizing","_keyboardShortcuts","handler","enabled","keyCode","altKey","metaKey","ctrlKey","togglePlay","preventDefault","commit","addEventListener","removeEventListener","keyboardShortcuts","this$1","hotkeys","shiftKey","recording","endRecord","run","record","exportFrame","playing","pause","play","_animateHandler","_resizeHandler","resize","render","sketch","_computePlayhead","currentTime","_computeFrame","time","fps","_computeCurrentFrame","_getSizeProps","viewportWidth","viewportHeight","dispose","started","_signalBegin","tick","cancelAnimationFrame","_lastTime","requestAnimationFrame","error","stop","deltaTime","exportOpts","_createExportOptions","frameInterval","log","_signalEnd","beginRecord","_wrapContextScale","catch","response","begin","end","wasRecording","sequence","encoding","encodingQuality","dateformat","all","preExport","commitOpts","_doExportFrame","drawResult","hasDataObject","data","toDataURL","exportCanvas","layerList","curOpt","saveParam","savePromise","parts","saveFile","saveResult","savedEvents","eventWithOutput","find","outputName","isClient","some","isStreaming","ofSeq","postExport","cb","_preRender","_postRender","p5","scale","scaleX","scaleY","scaleContext","flush","redraw","submitDrawCall","update","notYetSupported","oldCanvas","oldContext","timeOpts","timeProps","getTimeProps","_setupGLKey","_appendCanvasIfNeeded","oldSizes","newProps","pixelDensity","styleCanvas","newSizes","changed","_sizeChanged","frameIntervalMS","deltaTimeMS","hasDuration","isNewFrame","playbackRate","newTime","timeScale","isFinished","isLoopStart","loop","lastFrame","dispatch","mount","unmount","detach","ctx","clear","clearColor","bufferData","hasTotalFrames","totalFramesFromDuration","durationFromTotalFrames","Infinity","startTime","startFrame","hasStartTime","hasStartFrame","setup","loadAndRun","canvasSketch","newSettings","load","unload","destroy","createSketch","preload","P5Constructor","p5Sketch","isGL","renderer","WEBGL","P2D","noLoop","setAttributes","_renderer","drawingContext","loader","attach","message","CACHE","runtimeCollisions","hotID","isHot","hot","id","isInjecting","previousData","cacheGet","next","oldManager","manager","PaperSizes","_easing","_fadeOutOpacity","[object Object]","start","finish","PI","offset","progress","easeInOutQuint","opacity","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","radius","vx","vy","verticesCount","verticesCoords","sin","cos","realProgress","startX","startY","closePath","creator","boundary","imgCanvas","display","image","Image","onload","drawImage","getImageData","CANVAS_SKETCH_DEFAULT_STORAGE_KEY","location"],"mappings":"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","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import canvasSketch from 'canvas-sketch';\r\n\r\nimport Line from './premitives/Line';\r\nimport Shape from './premitives/Shape';\r\nimport arrayFrom from './utils/arrayFrom';\r\nimport getImageData from './utils/getImageData';\r\n\r\nconst settings = {\r\n  dimensions: [1280, 720],\r\n  duration: 4,\r\n  animate: true\r\n};\r\n\r\nconst LINES_COUNT = 500;\r\n\r\nconst sketch = ({ width, height }) => {\r\n  const lines = arrayFrom(() => new Line(), LINES_COUNT);\r\n  const shapes = [];\r\n\r\n  // This value allows scaling a generated result from image\r\n  const SCALE = 3;\r\n\r\n  // The loaded image will be scaled down to square with\r\n  // width and height equals to precision. \r\n  const PERCISION = 150;\r\n\r\n  // To add more rondom we will not draw every point.\r\n  // We chouse only thouse points for which condition\r\n  // Math.random() > RANDOM_BOUNDARY is true\r\n  const RANDOM_BOUNDARY = 0.3;\r\n\r\n  // Generate shapes in place of black pixels from an image\r\n  getImageData({\r\n     imageUrl: 'assets/text.png',\r\n     precision: PERCISION,\r\n  }).then(imageData => {\r\n    for (let x = 0; x < imageData.length; x++) {\r\n      for (let y = 0; y < imageData[x].length; y++) {\r\n        if (imageData[x][y] < 255 && Math.random() > RANDOM_BOUNDARY) {\r\n          shapes.push(new Shape(\r\n            (x - PERCISION / 2) * SCALE,\r\n            (y - PERCISION / 2) * SCALE\r\n          ))\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return ({ context, playhead }) => {\r\n    context.fillStyle = '#000';\r\n    context.clearRect(0, 0, width, height);\r\n    context.fillRect(0, 0, width, height);\r\n\r\n    context.fillStyle = '#fff';\r\n\r\n    context.save();\r\n    context.translate(width / 2, height / 2);\r\n\r\n    lines.forEach(line => {\r\n      context.save();\r\n      context.rotate(line.angle);\r\n      line.draw(context, playhead);\r\n      context.restore();\r\n    });\r\n\r\n    shapes.forEach(shape => {\r\n      shape.draw(context, playhead);\r\n    });\r\n\r\n    context.restore();\r\n  };\r\n};\r\n\r\ncanvasSketch(sketch, settings);","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports =\n  global.performance &&\n  global.performance.now ? function now() {\n    return performance.now()\n  } : Date.now || function now() {\n    return +new Date\n  }\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","\"use strict\";\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === \"object\" && x !== null;\n};\n","'use strict';\n\nmodule.exports = function (obj) {\n\n  if (obj == null) {\n    return false;\n  }\n\n  var o = Object(obj);\n\n  return o === o.window;\n};\n","var isObject = require('is-object')\nvar isWindow = require('is-window')\n\nfunction isNode (val) {\n  if (!isObject(val) || !isWindow(window) || typeof window.Node !== 'function') {\n    return false\n  }\n\n  return typeof val.nodeType === 'number' &&\n    typeof val.nodeName === 'string'\n}\n\nmodule.exports = isNode\n","// TODO: We can remove a huge chunk of bundle size by using a smaller\n// utility module for converting units.\nimport isDOM from 'is-dom';\n\nexport function getClientAPI () {\n  return typeof window !== 'undefined' && window['canvas-sketch-cli'];\n}\n\nexport function defined () {\n  for (let i = 0; i < arguments.length; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n  return undefined;\n}\n\nexport function isBrowser () {\n  return typeof document !== 'undefined';\n}\n\nexport function isWebGLContext (ctx) {\n  return typeof ctx.clear === 'function' && typeof ctx.clearColor === 'function' && typeof ctx.bufferData === 'function';\n}\n\nexport function isCanvas (element) {\n  return isDOM(element) && /canvas/i.test(element.nodeName) && typeof element.getContext === 'function';\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","\"use strict\";\n\n/* https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.is */\n\nvar NumberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t} else if (a === b) {\n\t\treturn true;\n\t} else if (NumberIsNaN(a) && NumberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar has = require('has');\nvar regexExec = RegExp.prototype.exec;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar tryRegexExecCall = function tryRegexExec(value) {\n\ttry {\n\t\tvar lastIndex = value.lastIndex;\n\t\tvalue.lastIndex = 0;\n\n\t\tregexExec.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\tvalue.lastIndex = lastIndex;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar regexClass = '[object RegExp]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isRegex(value) {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\tif (!hasToStringTag) {\n\t\treturn toStr.call(value) === regexClass;\n\t}\n\n\tvar descriptor = gOPD(value, 'lastIndex');\n\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\tif (!hasLastIndexDataProperty) {\n\t\treturn false;\n\t}\n\n\treturn tryRegexExecCall(value);\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar origDefineProperty = Object.defineProperty;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\torigDefineProperty(obj, 'x', { enumerable: false, value: obj });\n\t\t// eslint-disable-next-line no-unused-vars, no-restricted-syntax\n\t\tfor (var _ in obj) { // jscs:ignore disallowUnusedVariables\n\t\t\treturn false;\n\t\t}\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\torigDefineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar toObject = Object;\nvar TypeErr = TypeError;\n\nmodule.exports = function flags() {\n\tif (this != null && this !== toObject(this)) {\n\t\tthrow new TypeErr('RegExp.prototype.flags getter called on non-object');\n\t}\n\tvar result = '';\n\tif (this.global) {\n\t\tresult += 'g';\n\t}\n\tif (this.ignoreCase) {\n\t\tresult += 'i';\n\t}\n\tif (this.multiline) {\n\t\tresult += 'm';\n\t}\n\tif (this.dotAll) {\n\t\tresult += 's';\n\t}\n\tif (this.unicode) {\n\t\tresult += 'u';\n\t}\n\tif (this.sticky) {\n\t\tresult += 'y';\n\t}\n\treturn result;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar TypeErr = TypeError;\n\nmodule.exports = function getPolyfill() {\n\tif (!supportsDescriptors) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tif (/a/mig.flags === 'gim') {\n\t\tvar descriptor = gOPD(RegExp.prototype, 'flags');\n\t\tif (descriptor && typeof descriptor.get === 'function' && typeof (/a/).dotAll === 'boolean') {\n\t\t\treturn descriptor.get;\n\t\t}\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar getPolyfill = require('./polyfill');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar TypeErr = TypeError;\nvar getProto = Object.getPrototypeOf;\nvar regex = /a/;\n\nmodule.exports = function shimFlags() {\n\tif (!supportsDescriptors || !getProto) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tvar polyfill = getPolyfill();\n\tvar proto = getProto(regex);\n\tvar descriptor = gOPD(proto, 'flags');\n\tif (!descriptor || descriptor.get !== polyfill) {\n\t\tdefineProperty(proto, 'flags', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tget: polyfill\n\t\t});\n\t}\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar flagsBound = Function.call.bind(implementation);\n\ndefine(flagsBound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = flagsBound;\n","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateObject(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) { return false; }\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n","var objectKeys = require('object-keys');\nvar isArguments = require('is-arguments');\nvar is = require('object-is');\nvar isRegex = require('is-regex');\nvar flags = require('regexp.prototype.flags');\nvar isDate = require('is-date-object');\n\nvar getTime = Date.prototype.getTime;\n\nfunction deepEqual(actual, expected, options) {\n  var opts = options || {};\n\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (opts.strict ? is(actual, expected) : actual === expected) {\n    return true;\n  }\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object', equivalence is determined by ==.\n  if (!actual || !expected || (typeof actual !== 'object' && typeof expected !== 'object')) {\n    return opts.strict ? is(actual, expected) : actual == expected;\n  }\n\n  /*\n   * 7.4. For all other Object pairs, including Array objects, equivalence is\n   * determined by having the same number of owned properties (as verified\n   * with Object.prototype.hasOwnProperty.call), the same set of keys\n   * (although not necessarily the same order), equivalent values for every\n   * corresponding key, and an identical 'prototype' property. Note: this\n   * accounts for both named and indexed properties on Arrays.\n   */\n  // eslint-disable-next-line no-use-before-define\n  return objEquiv(actual, expected, opts);\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer(x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') {\n    return false;\n  }\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') {\n    return false;\n  }\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  /* eslint max-statements: [2, 50] */\n  var i, key;\n  if (typeof a !== typeof b) { return false; }\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b)) { return false; }\n\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) { return false; }\n\n  if (isArguments(a) !== isArguments(b)) { return false; }\n\n  var aIsRegex = isRegex(a);\n  var bIsRegex = isRegex(b);\n  if (aIsRegex !== bIsRegex) { return false; }\n  if (aIsRegex || bIsRegex) {\n    return a.source === b.source && flags(a) === flags(b);\n  }\n\n  if (isDate(a) && isDate(b)) {\n    return getTime.call(a) === getTime.call(b);\n  }\n\n  var aIsBuffer = isBuffer(a);\n  var bIsBuffer = isBuffer(b);\n  if (aIsBuffer !== bIsBuffer) { return false; }\n  if (aIsBuffer || bIsBuffer) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  if (typeof a !== typeof b) { return false; }\n\n  try {\n    var ka = objectKeys(a);\n    var kb = objectKeys(b);\n  } catch (e) { // happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates hasOwnProperty)\n  if (ka.length !== kb.length) { return false; }\n\n  // the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  // ~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) { return false; }\n  }\n  // equivalent values for every corresponding key, and ~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) { return false; }\n  }\n\n  return true;\n}\n\nmodule.exports = deepEqual;\n","/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n/**\n * Results cache\n */\n\nvar res = '';\nvar cache;\n\n/**\n * Expose `repeat`\n */\n\nmodule.exports = repeat;\n\n/**\n * Repeat the given `string` the specified `number`\n * of times.\n *\n * **Example:**\n *\n * ```js\n * var repeat = require('repeat-string');\n * repeat('A', 5);\n * //=> AAAAA\n * ```\n *\n * @param {String} `string` The string to repeat\n * @param {Number} `number` The number of times to repeat the string\n * @return {String} Repeated string\n * @api public\n */\n\nfunction repeat(str, num) {\n  if (typeof str !== 'string') {\n    throw new TypeError('expected a string');\n  }\n\n  // cover common, quick use cases\n  if (num === 1) return str;\n  if (num === 2) return str + str;\n\n  var max = str.length * num;\n  if (cache !== str || typeof cache === 'undefined') {\n    cache = str;\n    res = '';\n  } else if (res.length >= max) {\n    return res.substr(0, max);\n  }\n\n  while (max > res.length && num > 1) {\n    if (num & 1) {\n      res += str;\n    }\n\n    num >>= 1;\n    str += str;\n  }\n\n  res += str;\n  res = res.substr(0, max);\n  return res;\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","/*!\n * pad-left <https://github.com/jonschlinkert/pad-left>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar repeat = require('repeat-string');\n\nmodule.exports = function padLeft(str, num, ch) {\n  str = str.toString();\n\n  if (typeof num === 'undefined') {\n    return str;\n  }\n\n  if (ch === 0) {\n    ch = '0';\n  } else if (ch) {\n    ch = ch.toString();\n  } else {\n    ch = ' ';\n  }\n\n  return repeat(ch, num - str.length) + str;\n};\n","import dateformat from 'dateformat';\nimport assign from 'object-assign';\nimport padLeft from 'pad-left';\nimport { getClientAPI } from './util';\n\nconst noop = () => {};\nlet link;\nlet defaultExts = { extension: '', prefix: '', suffix: '' };\n\n// Alternative solution for saving files,\n// a bit slower and does not work in Safari\n// function fetchBlobFromDataURL (dataURL) {\n//   return window.fetch(dataURL).then(res => res.blob());\n// }\n\nconst supportedEncodings = [\n  'image/png',\n  'image/jpeg',\n  'image/webp'\n];\n\nfunction stream (isStart, opts = {}) {\n  return new Promise((resolve, reject) => {\n    opts = assign({}, defaultExts, opts);\n    const filename = resolveFilename(Object.assign({}, opts, {\n      extension: '',\n      frame: undefined\n    }));\n    const func = isStart ? 'streamStart' : 'streamEnd';\n    const client = getClientAPI();\n    if (client && client.output && typeof client[func] === 'function') {\n      return client[func](assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      return resolve({ filename, client: false });\n    }\n  });\n}\n\nexport function streamStart (opts = {}) {\n  return stream(true, opts);\n}\n\nexport function streamEnd (opts = {}) {\n  return stream(false, opts);\n}\n\nexport function exportCanvas (canvas, opt = {}) {\n  const encoding = opt.encoding || 'image/png';\n  if (!supportedEncodings.includes(encoding)) throw new Error(`Invalid canvas encoding ${encoding}`);\n  let extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n  if (extension) extension = `.${extension}`.toLowerCase();\n  return {\n    extension,\n    type: encoding,\n    dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n  };\n}\n\nfunction createBlobFromDataURL (dataURL) {\n  return new Promise((resolve) => {\n    const splitIndex = dataURL.indexOf(',');\n    if (splitIndex === -1) {\n      resolve(new window.Blob());\n      return;\n    }\n    const base64 = dataURL.slice(splitIndex + 1);\n    const byteString = window.atob(base64);\n    const type = dataURL.slice(0, splitIndex);\n    const mimeMatch = /data:([^;]+)/.exec(type);\n    const mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    resolve(new window.Blob([ ab ], { type: mime }));\n  });\n}\n\nexport function saveDataURL (dataURL, opts = {}) {\n  return createBlobFromDataURL(dataURL)\n    .then(blob => saveBlob(blob, opts));\n}\n\nexport function saveBlob (blob, opts = {}) {\n  return new Promise(resolve => {\n    opts = assign({}, defaultExts, opts);\n    const filename = opts.filename;\n\n    const client = getClientAPI();\n    if (client && typeof client.saveBlob === 'function' && client.output) {\n      // native saving using a CLI tool\n      return client.saveBlob(blob, assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      // force download\n      if (!link) {\n        link = document.createElement('a');\n        link.style.visibility = 'hidden';\n        link.target = '_blank';\n      }\n      link.download = filename;\n      link.href = window.URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.onclick = () => {\n        link.onclick = noop;\n        setTimeout(() => {\n          window.URL.revokeObjectURL(blob);\n          if (link.parentElement) link.parentElement.removeChild(link);\n          link.removeAttribute('href');\n          resolve({ filename, client: false });\n        });\n      };\n      link.click();\n    }\n  });\n}\n\nexport function saveFile (data, opts = {}) {\n  const parts = Array.isArray(data) ? data : [ data ];\n  const blob = new window.Blob(parts, { type: opts.type || '' });\n  return saveBlob(blob, opts);\n}\n\nexport function getTimeStamp () {\n  const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  return dateformat(new Date(), dateFormatStr);\n}\n\nexport function getDefaultFile (prefix = '', suffix = '', ext) {\n  // const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  const dateFormatStr = `yyyy-mm-dd 'at' h.MM.ss TT`;\n  return `${prefix}${dateformat(new Date(), dateFormatStr)}${suffix}${ext}`;\n}\n\nexport function resolveFilename (opt = {}) {\n  opt = assign({}, opt);\n\n  // Custom filename function\n  if (typeof opt.file === 'function') {\n    return opt.file(opt);\n  } else if (opt.file) {\n    return opt.file;\n  }\n\n  let frame = null;\n  let extension = '';\n  if (typeof opt.extension === 'string') extension = opt.extension;\n\n  if (typeof opt.frame === 'number') {\n    let totalFrames;\n    if (typeof opt.totalFrames === 'number') {\n      totalFrames = opt.totalFrames;\n    } else {\n      totalFrames = Math.max(1000, opt.frame);\n    }\n    frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n  }\n\n  const layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? `${opt.layer}` : '';\n  if (frame != null) {\n    return [ layerStr, frame ].filter(Boolean).join('-') + extension;\n  } else {\n    const defaultFileName = opt.timeStamp;\n    return [ opt.prefix, opt.name || defaultFileName, layerStr, opt.hash, opt.suffix ].filter(Boolean).join('-') + extension;\n  }\n}\n","// Handle some common typos\nconst commonTypos = {\n  dimension: 'dimensions',\n  animated: 'animate',\n  animating: 'animate',\n  unit: 'units',\n  P5: 'p5',\n  pixellated: 'pixelated',\n  looping: 'loop',\n  pixelPerInch: 'pixels'\n};\n\n// Handle all other typos\nconst allKeys = [\n  'dimensions', 'units', 'pixelsPerInch', 'orientation',\n  'scaleToFit', 'scaleToView', 'bleed', 'pixelRatio',\n  'exportPixelRatio', 'maxPixelRatio', 'scaleContext',\n  'resizeCanvas', 'styleCanvas', 'canvas', 'context', 'attributes',\n  'parent', 'file', 'name', 'prefix', 'suffix', 'animate', 'playing',\n  'loop', 'duration', 'totalFrames', 'fps', 'playbackRate', 'timeScale',\n  'frame', 'time', 'flush', 'pixelated', 'hotkeys', 'p5', 'id',\n  'scaleToFitPadding', 'data', 'params', 'encoding', 'encodingQuality'\n];\n\n// This is fairly opinionated and forces users to use the 'data' parameter\n// if they want to pass along non-setting objects...\nexport const checkSettings = (settings) => {\n  const keys = Object.keys(settings);\n  keys.forEach(key => {\n    if (key in commonTypos) {\n      const actual = commonTypos[key];\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\", did you mean \"${actual}\"?`);\n    } else if (!allKeys.includes(key)) {\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\"`);\n    }\n  });\n};\n","const defaultUnits = 'mm';\n\nconst data = [\n  // Common Paper Sizes\n  // (Mostly North-American based)\n  [ 'postcard', 101.6, 152.4 ],\n  [ 'poster-small', 280, 430 ],\n  [ 'poster', 460, 610 ],\n  [ 'poster-large', 610, 910 ],\n  [ 'business-card', 50.8, 88.9 ],\n\n  // Photographic Print Paper Sizes\n  [ '2r', 64, 89 ],\n  [ '3r', 89, 127 ],\n  [ '4r', 102, 152 ],\n  [ '5r', 127, 178 ], // 5x7\n  [ '6r', 152, 203 ], // 6x8\n  [ '8r', 203, 254 ], // 8x10\n  [ '10r', 254, 305 ], // 10x12\n  [ '11r', 279, 356 ], // 11x14\n  [ '12r', 305, 381 ],\n\n  // Standard Paper Sizes\n  [ 'a0', 841, 1189 ],\n  [ 'a1', 594, 841 ],\n  [ 'a2', 420, 594 ],\n  [ 'a3', 297, 420 ],\n  [ 'a4', 210, 297 ],\n  [ 'a5', 148, 210 ],\n  [ 'a6', 105, 148 ],\n  [ 'a7', 74, 105 ],\n  [ 'a8', 52, 74 ],\n  [ 'a9', 37, 52 ],\n  [ 'a10', 26, 37 ],\n  [ '2a0', 1189, 1682 ],\n  [ '4a0', 1682, 2378 ],\n  [ 'b0', 1000, 1414 ],\n  [ 'b1', 707, 1000 ],\n  [ 'b1+', 720, 1020 ],\n  [ 'b2', 500, 707 ],\n  [ 'b2+', 520, 720 ],\n  [ 'b3', 353, 500 ],\n  [ 'b4', 250, 353 ],\n  [ 'b5', 176, 250 ],\n  [ 'b6', 125, 176 ],\n  [ 'b7', 88, 125 ],\n  [ 'b8', 62, 88 ],\n  [ 'b9', 44, 62 ],\n  [ 'b10', 31, 44 ],\n  [ 'b11', 22, 32 ],\n  [ 'b12', 16, 22 ],\n  [ 'c0', 917, 1297 ],\n  [ 'c1', 648, 917 ],\n  [ 'c2', 458, 648 ],\n  [ 'c3', 324, 458 ],\n  [ 'c4', 229, 324 ],\n  [ 'c5', 162, 229 ],\n  [ 'c6', 114, 162 ],\n  [ 'c7', 81, 114 ],\n  [ 'c8', 57, 81 ],\n  [ 'c9', 40, 57 ],\n  [ 'c10', 28, 40 ],\n  [ 'c11', 22, 32 ],\n  [ 'c12', 16, 22 ],\n\n  // Use inches for North American sizes,\n  // as it produces less float precision errors\n  [ 'half-letter', 5.5, 8.5, 'in' ],\n  [ 'letter', 8.5, 11, 'in' ],\n  [ 'legal', 8.5, 14, 'in' ],\n  [ 'junior-legal', 5, 8, 'in' ],\n  [ 'ledger', 11, 17, 'in' ],\n  [ 'tabloid', 11, 17, 'in' ],\n  [ 'ansi-a', 8.5, 11.0, 'in' ],\n  [ 'ansi-b', 11.0, 17.0, 'in' ],\n  [ 'ansi-c', 17.0, 22.0, 'in' ],\n  [ 'ansi-d', 22.0, 34.0, 'in' ],\n  [ 'ansi-e', 34.0, 44.0, 'in' ],\n  [ 'arch-a', 9, 12, 'in' ],\n  [ 'arch-b', 12, 18, 'in' ],\n  [ 'arch-c', 18, 24, 'in' ],\n  [ 'arch-d', 24, 36, 'in' ],\n  [ 'arch-e', 36, 48, 'in' ],\n  [ 'arch-e1', 30, 42, 'in' ],\n  [ 'arch-e2', 26, 38, 'in' ],\n  [ 'arch-e3', 27, 39, 'in' ]\n];\n\nexport default data.reduce((dict, preset) => {\n  const item = {\n    units: preset[3] || defaultUnits,\n    dimensions: [ preset[1], preset[2] ]\n  };\n  dict[preset[0]] = item;\n  dict[preset[0].replace(/-/g, ' ')] = item;\n  return dict;\n}, {});\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","var defined = require('defined');\nvar units = [ 'mm', 'cm', 'm', 'pc', 'pt', 'in', 'ft', 'px' ];\n\nvar conversions = {\n  // metric\n  m: {\n    system: 'metric',\n    factor: 1\n  },\n  cm: {\n    system: 'metric',\n    factor: 1 / 100\n  },\n  mm: {\n    system: 'metric',\n    factor: 1 / 1000\n  },\n  // imperial\n  pt: {\n    system: 'imperial',\n    factor: 1 / 72\n  },\n  pc: {\n    system: 'imperial',\n    factor: 1 / 6\n  },\n  in: {\n    system: 'imperial',\n    factor: 1\n  },\n  ft: {\n    system: 'imperial',\n    factor: 12\n  }\n};\n\nconst anchors = {\n  metric: {\n    unit: 'm',\n    ratio: 1 / 0.0254\n  },\n  imperial: {\n    unit: 'in',\n    ratio: 0.0254\n  }\n};\n\nfunction round (value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nfunction convertDistance (value, fromUnit, toUnit, opts) {\n  if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n  if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n\n  opts = opts || {};\n  var pixelsPerInch = defined(opts.pixelsPerInch, 96);\n  var precision = opts.precision;\n  var roundPixel = opts.roundPixel !== false;\n\n  fromUnit = fromUnit.toLowerCase();\n  toUnit = toUnit.toLowerCase();\n\n  if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n  if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n\n  if (fromUnit === toUnit) {\n    // We don't need to convert from A to B since they are the same already\n    return value;\n  }\n\n  var toFactor = 1;\n  var fromFactor = 1;\n  var isToPixel = false;\n\n  if (fromUnit === 'px') {\n    fromFactor = 1 / pixelsPerInch;\n    fromUnit = 'in';\n  }\n  if (toUnit === 'px') {\n    isToPixel = true;\n    toFactor = pixelsPerInch;\n    toUnit = 'in';\n  }\n\n  var fromUnitData = conversions[fromUnit];\n  var toUnitData = conversions[toUnit];\n\n  // source to anchor inside source's system\n  var anchor = value * fromUnitData.factor * fromFactor;\n\n  // if systems differ, convert one to another\n  if (fromUnitData.system !== toUnitData.system) {\n    // regular 'm' to 'in' and so forth\n    anchor *= anchors[fromUnitData.system].ratio;\n  }\n\n  var result = anchor / toUnitData.factor * toFactor;\n  if (isToPixel && roundPixel) {\n    result = Math.round(result);\n  } else if (typeof precision === 'number' && isFinite(precision)) {\n    result = round(result, precision);\n  }\n  return result;\n}\n\nmodule.exports = convertDistance;\nmodule.exports.units = units;\n","import paperSizes from './paper-sizes';\nimport convertLength from 'convert-length';\n\nexport function getDimensionsFromPreset (dimensions, unitsTo = 'px', pixelsPerInch = 72) {\n  if (typeof dimensions === 'string') {\n    const key = dimensions.toLowerCase();\n    if (!(key in paperSizes)) {\n      throw new Error(`The dimension preset \"${dimensions}\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.`)\n    }\n    const preset = paperSizes[key];\n    return preset.dimensions.map(d => {\n      return convertDistance(d, preset.units, unitsTo, pixelsPerInch);\n    });\n  } else {\n    return dimensions;\n  }\n}\n\nexport function convertDistance (dimension, unitsFrom = 'px', unitsTo = 'px', pixelsPerInch = 72) {\n  return convertLength(dimension, unitsFrom, unitsTo, {\n    pixelsPerInch,\n    precision: 4,\n    roundPixel: true\n  });\n}\n","import { getDimensionsFromPreset, convertDistance } from '../distances';\nimport { isBrowser, defined } from '../util';\n\nfunction checkIfHasDimensions (settings) {\n  if (!settings.dimensions) return false;\n  if (typeof settings.dimensions === 'string') return true;\n  if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) return true;\n  return false;\n}\n\nfunction getParentSize (props, settings) {\n  // When no { dimension } is passed in node, we default to HTML canvas size\n  if (!isBrowser()) {\n    return [ 300, 150 ];\n  }\n\n  let element = settings.parent || window;\n\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return [ window.innerWidth, window.innerHeight ];\n  } else {\n    const { width, height } = element.getBoundingClientRect();\n    return [ width, height ];\n  }\n}\n\nexport default function resizeCanvas (props, settings) {\n  let width, height;\n  let styleWidth, styleHeight;\n  let canvasWidth, canvasHeight;\n\n  const browser = isBrowser();\n  const dimensions = settings.dimensions;\n  const hasDimensions = checkIfHasDimensions(settings);\n  const exporting = props.exporting;\n  let scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n  let scaleToView = (!exporting && hasDimensions) ? settings.scaleToView : true;\n  // in node, cancel both of these options\n  if (!browser) scaleToFit = scaleToView = false;\n  const units = settings.units;\n  const pixelsPerInch = (typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch)) ? settings.pixelsPerInch : 72;\n  const bleed = defined(settings.bleed, 0);\n\n  const devicePixelRatio = browser ? window.devicePixelRatio : 1;\n  const basePixelRatio = scaleToView ? devicePixelRatio : 1;\n\n  let pixelRatio, exportPixelRatio;\n\n  // If a pixel ratio is specified, we will use it.\n  // Otherwise:\n  //  -> If dimension is specified, use base ratio (i.e. size for export)\n  //  -> If no dimension is specified, use device ratio (i.e. size for screen)\n  if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n    // When { pixelRatio } is specified, it's also used as default exportPixelRatio.\n    pixelRatio = settings.pixelRatio;\n    exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n  } else {\n    if (hasDimensions) {\n      // When a dimension is specified, use the base ratio rather than screen ratio\n      pixelRatio = basePixelRatio;\n      // Default to a pixel ratio of 1 so that you end up with the same dimension\n      // you specified, i.e. [ 500, 500 ] is exported as 500x500 px\n      exportPixelRatio = defined(settings.exportPixelRatio, 1);\n    } else {\n      // No dimension is specified, assume full-screen retina sizing\n      pixelRatio = devicePixelRatio;\n      // Default to screen pixel ratio, so that it's like taking a device screenshot\n      exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n    }\n  }\n\n  // Clamp pixel ratio\n  if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) {\n    pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n  }\n\n  // Handle export pixel ratio\n  if (exporting) {\n    pixelRatio = exportPixelRatio;\n  }\n\n  // parentWidth = typeof parentWidth === 'undefined' ? defaultNodeSize[0] : parentWidth;\n  // parentHeight = typeof parentHeight === 'undefined' ? defaultNodeSize[1] : parentHeight;\n\n  let [ parentWidth, parentHeight ] = getParentSize(props, settings);\n  let trimWidth, trimHeight;\n\n  // You can specify a dimensions in pixels or cm/m/in/etc\n  if (hasDimensions) {\n    const result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n    const highest = Math.max(result[0], result[1]);\n    const lowest = Math.min(result[0], result[1]);\n    if (settings.orientation) {\n      const landscape = settings.orientation === 'landscape';\n      width = landscape ? highest : lowest;\n      height = landscape ? lowest : highest;\n    } else {\n      width = result[0];\n      height = result[1];\n    }\n\n    trimWidth = width;\n    trimHeight = height;\n\n    // Apply bleed which is assumed to be in the same units\n    width += bleed * 2;\n    height += bleed * 2;\n  } else {\n    width = parentWidth;\n    height = parentHeight;\n    trimWidth = width;\n    trimHeight = height;\n  }\n\n  // Real size in pixels after PPI is taken into account\n  let realWidth = width;\n  let realHeight = height;\n  if (hasDimensions && units) {\n    // Convert to digital/pixel units if necessary\n    realWidth = convertDistance(width, units, 'px', pixelsPerInch);\n    realHeight = convertDistance(height, units, 'px', pixelsPerInch);\n  }\n\n  // How big to set the 'view' of the canvas in the browser (i.e. style)\n  styleWidth = Math.round(realWidth);\n  styleHeight = Math.round(realHeight);\n\n  // If we wish to scale the view to the browser window\n  if (scaleToFit && !exporting && hasDimensions) {\n    const aspect = width / height;\n    const windowAspect = parentWidth / parentHeight;\n    const scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n    const maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n    const maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n    if (styleWidth > maxWidth || styleHeight > maxHeight) {\n      if (windowAspect > aspect) {\n        styleHeight = maxHeight;\n        styleWidth = Math.round(styleHeight * aspect);\n      } else {\n        styleWidth = maxWidth;\n        styleHeight = Math.round(styleWidth / aspect);\n      }\n    }\n  }\n\n  canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n  canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n\n  const viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n  const viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n\n  const scaleX = canvasWidth / width;\n  const scaleY = canvasHeight / height;\n\n  // Assign to current props\n  return {\n    bleed,\n    pixelRatio,\n    width,\n    height,\n    dimensions: [ width, height ],\n    units: units || 'px',\n    scaleX,\n    scaleY,\n    pixelsPerInch,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    trimWidth,\n    trimHeight,\n    styleWidth,\n    styleHeight\n  };\n}\n","module.exports = getCanvasContext\nfunction getCanvasContext (type, opts) {\n  if (typeof type !== 'string') {\n    throw new TypeError('must specify type string')\n  }\n\n  opts = opts || {}\n\n  if (typeof document === 'undefined' && !opts.canvas) {\n    return null // check for Node\n  }\n\n  var canvas = opts.canvas || document.createElement('canvas')\n  if (typeof opts.width === 'number') {\n    canvas.width = opts.width\n  }\n  if (typeof opts.height === 'number') {\n    canvas.height = opts.height\n  }\n\n  var attribs = opts\n  var gl\n  try {\n    var names = [ type ]\n    // prefix GL contexts\n    if (type.indexOf('webgl') === 0) {\n      names.push('experimental-' + type)\n    }\n\n    for (var i = 0; i < names.length; i++) {\n      gl = canvas.getContext(names[i], attribs)\n      if (gl) return gl\n    }\n  } catch (e) {\n    gl = null\n  }\n  return (gl || null) // ensure null on fail\n}\n","import assign from 'object-assign';\nimport getCanvasContext from 'get-canvas-context';\nimport { isBrowser } from '../util';\n\nfunction createCanvasElement () {\n  if (!isBrowser()) {\n    throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n  }\n  return document.createElement('canvas');\n}\n\nexport default function createCanvas (settings = {}) {\n  let context, canvas;\n  let ownsCanvas = false;\n  if (settings.canvas !== false) {\n    // Determine the canvas and context to create\n    context = settings.context;\n    if (!context || typeof context === 'string') {\n      let newCanvas = settings.canvas;\n      if (!newCanvas) {\n        newCanvas = createCanvasElement();\n        ownsCanvas = true;\n      }\n      const type = context || '2d';\n      if (typeof newCanvas.getContext !== 'function') {\n        throw new Error(`The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?`);\n      }\n      context = getCanvasContext(type, assign({}, settings.attributes, { canvas: newCanvas }));\n      if (!context) {\n        throw new Error(`Failed at canvas.getContext('${type}') - the browser may not support this context, or a different context may already be in use with this canvas.`);\n      }\n    }\n\n    canvas = context.canvas;\n    // Ensure context matches user's canvas expectations\n    if (settings.canvas && canvas !== settings.canvas) {\n      throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n    }\n\n    // Apply pixelation to canvas if necessary, this is mostly a convenience utility\n    if (settings.pixelated) {\n      context.imageSmoothingEnabled = false;\n      context.mozImageSmoothingEnabled = false;\n      context.oImageSmoothingEnabled = false;\n      context.webkitImageSmoothingEnabled = false;\n      context.msImageSmoothingEnabled = false;\n      canvas.style['image-rendering'] = 'pixelated';\n    }\n  }\n  return { canvas, context, ownsCanvas };\n}\n","import assign from 'object-assign';\nimport rightNow from 'right-now';\nimport isPromise from 'is-promise';\nimport { isBrowser, defined, isWebGLContext, isCanvas, getClientAPI } from '../util';\nimport deepEqual from 'deep-equal';\nimport {\n  resolveFilename,\n  saveFile,\n  saveDataURL,\n  getTimeStamp,\n  exportCanvas,\n  streamStart,\n  streamEnd\n} from '../save';\nimport { checkSettings } from '../accessibility';\n\nimport keyboardShortcuts from './keyboardShortcuts';\nimport resizeCanvas from './resizeCanvas';\nimport createCanvas from './createCanvas';\n\nclass SketchManager {\n  constructor () {\n    this._settings = {};\n    this._props = {};\n    this._sketch = undefined;\n    this._raf = null;\n\n    // Some hacky things required to get around p5.js structure\n    this._lastRedrawResult = undefined;\n    this._isP5Resizing = false;\n\n    this._keyboardShortcuts = keyboardShortcuts({\n      enabled: () => this.settings.hotkeys !== false,\n      save: (ev) => {\n        if (ev.shiftKey) {\n          if (this.props.recording) {\n            this.endRecord();\n            this.run();\n          } else this.record();\n        } else if (!this.props.recording) {\n          this.exportFrame();\n        }\n      },\n      togglePlay: () => {\n        if (this.props.playing) this.pause();\n        else this.play();\n      },\n      commit: (ev) => {\n        this.exportFrame({ commit: true });\n      }\n    });\n\n    this._animateHandler = () => this.animate();\n\n    this._resizeHandler = () => {\n      const changed = this.resize();\n      // Only re-render when size actually changes\n      if (changed) {\n        this.render();\n      }\n    };\n  }\n\n  get sketch () {\n    return this._sketch;\n  }\n\n  get settings () {\n    return this._settings;\n  }\n\n  get props () {\n    return this._props;\n  }\n\n  _computePlayhead (currentTime, duration) {\n    const hasDuration = typeof duration === 'number' && isFinite(duration);\n    return hasDuration ? currentTime / duration : 0;\n  }\n\n  _computeFrame (playhead, time, totalFrames, fps) {\n    return (isFinite(totalFrames) && totalFrames > 1)\n      ? Math.floor(playhead * (totalFrames - 1))\n      : Math.floor(fps * time);\n  }\n\n  _computeCurrentFrame () {\n    return this._computeFrame(\n      this.props.playhead, this.props.time,\n      this.props.totalFrames, this.props.fps\n    );\n  }\n\n  _getSizeProps () {\n    const props = this.props;\n    return {\n      width: props.width,\n      height: props.height,\n      pixelRatio: props.pixelRatio,\n      canvasWidth: props.canvasWidth,\n      canvasHeight: props.canvasHeight,\n      viewportWidth: props.viewportWidth,\n      viewportHeight: props.viewportHeight\n    };\n  }\n\n  run () {\n    if (!this.sketch) throw new Error('should wait until sketch is loaded before trying to play()');\n\n    // Start an animation frame loop if necessary\n    if (this.settings.playing !== false) {\n      this.play();\n    }\n\n    // Let's let this warning hang around for a few versions...\n    if (typeof this.sketch.dispose === 'function') {\n      console.warn('In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()');\n    }\n\n    // In case we aren't playing or animated, make sure we still trigger begin message...\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Render an initial frame\n    this.tick();\n    this.render();\n    return this;\n  }\n\n  play () {\n    let animate = this.settings.animate;\n    if ('animation' in this.settings) {\n      animate = true;\n      console.warn('[canvas-sketch] { animation } has been renamed to { animate }');\n    }\n    if (!animate) return;\n    if (!isBrowser()) {\n      console.error('[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported');\n      return;\n    }\n    if (this.props.playing) return;\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // console.log('play', this.props.time)\n\n    // Start a render loop\n    this.props.playing = true;\n    if (this._raf != null) window.cancelAnimationFrame(this._raf);\n    this._lastTime = rightNow();\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n  }\n\n  pause () {\n    if (this.props.recording) this.endRecord();\n    this.props.playing = false;\n\n    if (this._raf != null && isBrowser()) {\n      window.cancelAnimationFrame(this._raf);\n    }\n  }\n\n  togglePlay () {\n    if (this.props.playing) this.pause();\n    else this.play();\n  }\n\n  // Stop and reset to frame zero\n  stop () {\n    this.pause();\n    this.props.frame = 0;\n    this.props.playhead = 0;\n    this.props.time = 0;\n    this.props.deltaTime = 0;\n    this.props.started = false;\n    this.render();\n  }\n\n  record () {\n    if (this.props.recording) return;\n    if (!isBrowser()) {\n      console.error('[canvas-sketch] WARN: Recording from Node.js is not yet supported');\n      return;\n    }\n\n    this.stop();\n    this.props.playing = true;\n    this.props.recording = true;\n\n    const exportOpts = this._createExportOptions({ sequence: true });\n\n    const frameInterval = 1 / this.props.fps;\n    // Render each frame in the sequence\n    if (this._raf != null) window.cancelAnimationFrame(this._raf);\n    const tick = () => {\n      if (!this.props.recording) return Promise.resolve();\n      this.props.deltaTime = frameInterval;\n      this.tick();\n      return this.exportFrame(exportOpts)\n        .then(() => {\n          if (!this.props.recording) return; // was cancelled before\n          this.props.deltaTime = 0;\n          this.props.frame++;\n          if (this.props.frame < this.props.totalFrames) {\n            this.props.time += frameInterval;\n            this.props.playhead = this._computePlayhead(this.props.time, this.props.duration);\n            this._raf = window.requestAnimationFrame(tick);\n          } else {\n            console.log('Finished recording');\n            this._signalEnd();\n            this.endRecord();\n            this.stop();\n            this.run();\n          }\n        });\n    };\n\n    // Trigger a start event before we begin recording\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Trigger 'begin record' event\n    if (this.sketch && typeof this.sketch.beginRecord === 'function') {\n      this._wrapContextScale(props => this.sketch.beginRecord(props));\n    }\n\n    // Initiate a streaming start if necessary\n    streamStart(exportOpts)\n      .catch(err => {\n        console.error(err);\n      })\n      .then(response => {\n        this._raf = window.requestAnimationFrame(tick);\n      });\n  }\n\n  _signalBegin () {\n    if (this.sketch && typeof this.sketch.begin === 'function') {\n      this._wrapContextScale(props => this.sketch.begin(props));\n    }\n  }\n\n  _signalEnd () {\n    if (this.sketch && typeof this.sketch.end === 'function') {\n      this._wrapContextScale(props => this.sketch.end(props));\n    }\n  }\n\n  endRecord () {\n    const wasRecording = this.props.recording;\n\n    if (this._raf != null && isBrowser()) window.cancelAnimationFrame(this._raf);\n    this.props.recording = false;\n    this.props.deltaTime = 0;\n    this.props.playing = false;\n\n    // Trigger 'end record' event\n    if (wasRecording && this.sketch && typeof this.sketch.endRecord === 'function') {\n      this._wrapContextScale(props => this.sketch.endRecord(props));\n    }\n\n    // tell CLI that stream has finished\n    streamEnd()\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  _createExportOptions (opt = {}) {\n    return {\n      sequence: opt.sequence,\n      save: opt.save,\n      fps: this.props.fps,\n      frame: opt.sequence ? this.props.frame : undefined,\n      file: this.settings.file,\n      name: this.settings.name,\n      prefix: this.settings.prefix,\n      suffix: this.settings.suffix,\n      encoding: this.settings.encoding,\n      encodingQuality: this.settings.encodingQuality,\n      timeStamp: opt.timeStamp || getTimeStamp(),\n      totalFrames: isFinite(this.props.totalFrames) ? Math.max(100, this.props.totalFrames) : 1000\n    };\n  }\n\n  exportFrame (opt = {}) {\n    if (!this.sketch) return Promise.all([]);\n    if (typeof this.sketch.preExport === 'function') {\n      this.sketch.preExport();\n    }\n\n    // Options for export function\n    let exportOpts = this._createExportOptions(opt);\n\n    const client = getClientAPI();\n    let p = Promise.resolve();\n    if (client && opt.commit && typeof client.commit === 'function') {\n      const commitOpts = assign({}, exportOpts);\n      const hash = client.commit(commitOpts);\n      if (isPromise(hash)) p = hash;\n      else p = Promise.resolve(hash);\n    }\n\n    return p.then(hash => {\n      return this._doExportFrame(assign({}, exportOpts, { hash: hash || '' }));\n    }).then(result => {\n      // Most common usecase is to export a single layer,\n      // so let's optimize the user experience for that.\n      if (result.length === 1) return result[0];\n      else return result;\n    });\n  }\n\n  _doExportFrame (exportOpts = {}) {\n    this._props.exporting = true;\n\n    // Resize to output resolution\n    this.resize();\n\n    // Draw at this output resolution\n    let drawResult = this.render();\n\n    // The self owned canvas (may be undefined...!)\n    const canvas = this.props.canvas;\n\n    // Get list of results from render\n    if (typeof drawResult === 'undefined') {\n      drawResult = [ canvas ];\n    }\n    drawResult = [].concat(drawResult).filter(Boolean);\n\n    // Transform the canvas/file descriptors into a consistent format,\n    // and pull out any data URLs from canvas elements\n    drawResult = drawResult.map(result => {\n      const hasDataObject = typeof result === 'object' && result && ('data' in result || 'dataURL' in result);\n      const data = hasDataObject ? result.data : result;\n      const opts = hasDataObject ? assign({}, result, { data }) : { data };\n      if (isCanvas(data)) {\n        const encoding = opts.encoding || exportOpts.encoding;\n        const encodingQuality = defined(opts.encodingQuality, exportOpts.encodingQuality, 0.95);\n        const { dataURL, extension, type } = exportCanvas(data, { encoding, encodingQuality });\n        return Object.assign(opts, { dataURL, extension, type });\n      } else {\n        return opts;\n      }\n    });\n\n    // Now return to regular rendering mode\n    this._props.exporting = false;\n    this.resize();\n    this.render();\n\n    // And now we can save each result\n    return Promise.all(drawResult.map((result, i, layerList) => {\n      // By default, if rendering multiple layers we will give them indices\n      const curOpt = assign({\n        extension: '',\n        prefix: '',\n        suffix: ''\n      }, exportOpts, result, {\n        layer: i,\n        totalLayers: layerList.length\n      });\n\n      // If export is explicitly not saving, make sure nothing saves\n      // Otherwise default to the layer save option, or fallback to true\n      const saveParam = exportOpts.save === false ? false : result.save;\n      curOpt.save = saveParam !== false;\n\n      // Resolve a full filename from all the options\n      curOpt.filename = resolveFilename(curOpt);\n\n      // Clean up some parameters that may be ambiguous to the user\n      delete curOpt.encoding;\n      delete curOpt.encodingQuality;\n\n      // Clean it up further by just removing undefined values\n      for (let k in curOpt) {\n        if (typeof curOpt[k] === 'undefined') delete curOpt[k];\n      }\n\n      let savePromise = Promise.resolve({});\n      if (curOpt.save) {\n        // Whether to actually save (download) this fragment\n        const data = curOpt.data;\n        if (curOpt.dataURL) {\n          const dataURL = curOpt.dataURL;\n          savePromise = saveDataURL(dataURL, curOpt);\n        } else {\n          savePromise = saveFile(data, curOpt);\n        }\n      }\n      return savePromise.then(saveResult => {\n        return Object.assign({}, curOpt, saveResult);\n      });\n    })).then(ev => {\n      const savedEvents = ev.filter(e => e.save);\n      if (savedEvents.length > 0) {\n        // Log the saved exports\n        const eventWithOutput = savedEvents.find(e => e.outputName);\n        const isClient = savedEvents.some(e => e.client);\n        const isStreaming = savedEvents.some(e => e.stream);\n        let item;\n        // many files, just log how many were exported\n        if (savedEvents.length > 1) item = savedEvents.length;\n        // in CLI, we know exact path dirname\n        else if (eventWithOutput) item = `${eventWithOutput.outputName}/${savedEvents[0].filename}`;\n        // in browser, we can only know it went to \"browser download folder\"\n        else item = `${savedEvents[0].filename}`;\n        let ofSeq = '';\n        if (exportOpts.sequence) {\n          const hasTotalFrames = isFinite(this.props.totalFrames);\n          ofSeq = hasTotalFrames ? ` (frame ${exportOpts.frame + 1} / ${this.props.totalFrames})` : ` (frame ${exportOpts.frame})`;\n        } else if (savedEvents.length > 1) {\n          ofSeq = ` files`;\n        }\n        const client = isClient ? 'canvas-sketch-cli' : 'canvas-sketch';\n        const action = isStreaming ? 'Streaming into' : 'Exported';\n        console.log(`%c[${client}]%c ${action} %c${item}%c${ofSeq}`, 'color: #8e8e8e;', 'color: initial;', 'font-weight: bold;', 'font-weight: initial;');\n      }\n      if (typeof this.sketch.postExport === 'function') {\n        this.sketch.postExport();\n      }\n      return ev;\n    });\n  }\n\n  _wrapContextScale (cb) {\n    this._preRender();\n    cb(this.props);\n    this._postRender();\n  }\n\n  _preRender () {\n    const props = this.props;\n\n    // Scale context for unit sizing\n    if (!this.props.gl && props.context && !props.p5) {\n      props.context.save();\n      if (this.settings.scaleContext !== false) {\n        props.context.scale(props.scaleX, props.scaleY);\n      }\n    } else if (props.p5) {\n      props.p5.scale(props.scaleX / props.pixelRatio, props.scaleY / props.pixelRatio);\n    }\n  }\n\n  _postRender () {\n    const props = this.props;\n\n    if (!this.props.gl && props.context && !props.p5) {\n      props.context.restore();\n    }\n\n    // Flush by default, this may be revisited at a later point.\n    // We do this to ensure toDataURL can be called immediately after.\n    // Most likely browsers already handle this, so we may revisit this and\n    // remove it if it improves performance without any usability issues.\n    if (props.gl && this.settings.flush !== false && !props.p5) {\n      props.gl.flush();\n    }\n  }\n\n  tick () {\n    if (this.sketch && typeof this.sketch.tick === 'function') {\n      this._preRender();\n      this.sketch.tick(this.props);\n      this._postRender();\n    }\n  }\n\n  render () {\n    if (this.props.p5) {\n      this._lastRedrawResult = undefined;\n      this.props.p5.redraw();\n      return this._lastRedrawResult;\n    } else {\n      return this.submitDrawCall();\n    }\n  }\n\n  submitDrawCall () {\n    if (!this.sketch) return;\n\n    const props = this.props;\n    this._preRender();\n\n    let drawResult;\n\n    if (typeof this.sketch === 'function') {\n      drawResult = this.sketch(props);\n    } else if (typeof this.sketch.render === 'function') {\n      drawResult = this.sketch.render(props);\n    }\n\n    this._postRender();\n\n    return drawResult;\n  }\n\n  update (opt = {}) {\n    // Currently update() is only focused on resizing,\n    // but later we will support other options like switching\n    // frames and such.\n    const notYetSupported = [\n      'animate'\n    ];\n\n    Object.keys(opt).forEach(key => {\n      if (notYetSupported.indexOf(key) >= 0) {\n        throw new Error(`Sorry, the { ${key} } option is not yet supported with update().`);\n      }\n    });\n\n    const oldCanvas = this._settings.canvas;\n    const oldContext = this._settings.context;\n\n    // Merge new options into settings\n    for (let key in opt) {\n      const value = opt[key];\n      if (typeof value !== 'undefined') { // ignore undefined\n        this._settings[key] = value;\n      }\n    }\n\n    // Merge in time props\n    const timeOpts = Object.assign({}, this._settings, opt);\n    if ('time' in opt && 'frame' in opt) throw new Error('You should specify { time } or { frame } but not both');\n    else if ('time' in opt) delete timeOpts.frame;\n    else if ('frame' in opt) delete timeOpts.time;\n    if ('duration' in opt && 'totalFrames' in opt) throw new Error('You should specify { duration } or { totalFrames } but not both');\n    else if ('duration' in opt) delete timeOpts.totalFrames;\n    else if ('totalFrames' in opt) delete timeOpts.duration;\n\n    // Merge in user data without copying\n    if ('data' in opt) this._props.data = opt.data;\n\n    const timeProps = this.getTimeProps(timeOpts);\n    Object.assign(this._props, timeProps);\n\n    // If either canvas or context is changed, we should re-update\n    if (oldCanvas !== this._settings.canvas || oldContext !== this._settings.context) {\n      const { canvas, context } = createCanvas(this._settings);\n\n      this.props.canvas = canvas;\n      this.props.context = context;\n\n      // Delete or add a 'gl' prop for convenience\n      this._setupGLKey();\n\n      // Re-mount the new canvas if it has no parent\n      this._appendCanvasIfNeeded();\n    }\n\n    // Special case to support P5.js\n    if (opt.p5 && typeof opt.p5 !== 'function') {\n      this.props.p5 = opt.p5;\n      this.props.p5.draw = () => {\n        if (this._isP5Resizing) return;\n        this._lastRedrawResult = this.submitDrawCall();\n      };\n    }\n\n    // Update playing state if necessary\n    if ('playing' in opt) {\n      if (opt.playing) this.play();\n      else this.pause();\n    }\n\n    checkSettings(this._settings);\n\n    // Draw new frame\n    this.resize();\n    this.render();\n    return this.props;\n  }\n\n  resize () {\n    const oldSizes = this._getSizeProps();\n\n    const settings = this.settings;\n    const props = this.props;\n\n    // Recompute new properties based on current setup\n    const newProps = resizeCanvas(props, settings);\n\n    // Assign to current props\n    Object.assign(this._props, newProps);\n\n    // Now we actually update the canvas width/height and style props\n    const {\n      pixelRatio,\n      canvasWidth,\n      canvasHeight,\n      styleWidth,\n      styleHeight\n    } = this.props;\n\n    // Update canvas settings\n    const canvas = this.props.canvas;\n    if (canvas && settings.resizeCanvas !== false) {\n      if (props.p5) {\n        // P5.js specific edge case\n        if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n          this._isP5Resizing = true;\n          // This causes a re-draw :\\ so we ignore draws in the mean time... sorta hacky\n          props.p5.pixelDensity(pixelRatio);\n          props.p5.resizeCanvas(canvasWidth / pixelRatio, canvasHeight / pixelRatio, false);\n          this._isP5Resizing = false;\n        }\n      } else {\n        // Force canvas size\n        if (canvas.width !== canvasWidth) canvas.width = canvasWidth;\n        if (canvas.height !== canvasHeight) canvas.height = canvasHeight;\n      }\n      // Update canvas style\n      if (isBrowser() && settings.styleCanvas !== false) {\n        canvas.style.width = `${styleWidth}px`;\n        canvas.style.height = `${styleHeight}px`;\n      }\n    }\n\n    const newSizes = this._getSizeProps();\n    let changed = !deepEqual(oldSizes, newSizes);\n    if (changed) {\n      this._sizeChanged();\n    }\n    return changed;\n  }\n\n  _sizeChanged () {\n    // Send resize event to sketch\n    if (this.sketch && typeof this.sketch.resize === 'function') {\n      this.sketch.resize(this.props);\n    }\n  }\n\n  animate () {\n    if (!this.props.playing) return;\n    if (!isBrowser()) {\n      console.error('[canvas-sketch] WARN: Animation in Node.js is not yet supported');\n      return;\n    }\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n\n    let now = rightNow();\n\n    const fps = this.props.fps;\n    const frameIntervalMS = 1000 / fps;\n    let deltaTimeMS = now - this._lastTime;\n\n    const duration = this.props.duration;\n    const hasDuration = typeof duration === 'number' && isFinite(duration);\n\n    let isNewFrame = true;\n    const playbackRate = this.settings.playbackRate;\n    if (playbackRate === 'fixed') {\n      deltaTimeMS = frameIntervalMS;\n    } else if (playbackRate === 'throttle') {\n      if (deltaTimeMS > frameIntervalMS) {\n        now = now - (deltaTimeMS % frameIntervalMS);\n        this._lastTime = now;\n      } else {\n        isNewFrame = false;\n      }\n    } else {\n      this._lastTime = now;\n    }\n\n    const deltaTime = deltaTimeMS / 1000;\n    let newTime = this.props.time + deltaTime * this.props.timeScale;\n\n    // Handle reverse time scale\n    if (newTime < 0 && hasDuration) {\n      newTime = duration + newTime;\n    }\n\n    // Re-start animation\n    let isFinished = false;\n    let isLoopStart = false;\n\n    const looping = this.settings.loop !== false;\n\n    if (hasDuration && newTime >= duration) {\n      // Re-start animation\n      if (looping) {\n        isNewFrame = true;\n        newTime = newTime % duration;\n        isLoopStart = true;\n      } else {\n        isNewFrame = false;\n        newTime = duration;\n        isFinished = true;\n      }\n\n      this._signalEnd();\n    }\n\n    if (isNewFrame) {\n      this.props.deltaTime = deltaTime;\n      this.props.time = newTime;\n      this.props.playhead = this._computePlayhead(newTime, duration);\n      const lastFrame = this.props.frame;\n      this.props.frame = this._computeCurrentFrame();\n      if (isLoopStart) this._signalBegin();\n      if (lastFrame !== this.props.frame) this.tick();\n      this.render();\n      this.props.deltaTime = 0;\n    }\n\n    if (isFinished) {\n      this.pause();\n    }\n  }\n\n  dispatch (cb) {\n    if (typeof cb !== 'function') throw new Error('must pass function into dispatch()');\n    cb(this.props);\n    this.render();\n  }\n\n  mount () {\n    this._appendCanvasIfNeeded();\n  }\n\n  unmount () {\n    if (isBrowser()) {\n      window.removeEventListener('resize', this._resizeHandler);\n      this._keyboardShortcuts.detach();\n    }\n    if (this.props.canvas.parentElement) {\n      this.props.canvas.parentElement.removeChild(this.props.canvas);\n    }\n  }\n\n  _appendCanvasIfNeeded () {\n    if (!isBrowser()) return;\n    if (this.settings.parent !== false && (this.props.canvas && !this.props.canvas.parentElement)) {\n      const defaultParent = this.settings.parent || document.body;\n      defaultParent.appendChild(this.props.canvas);\n    }\n  }\n\n  _setupGLKey () {\n    if (this.props.context) {\n      if (isWebGLContext(this.props.context)) {\n        this._props.gl = this.props.context;\n      } else {\n        delete this._props.gl;\n      }\n    }\n  }\n\n  getTimeProps (settings = {}) {\n    // Get timing data\n    let duration = settings.duration;\n    let totalFrames = settings.totalFrames;\n    const timeScale = defined(settings.timeScale, 1);\n    const fps = defined(settings.fps, 24);\n    const hasDuration = typeof duration === 'number' && isFinite(duration);\n    const hasTotalFrames = typeof totalFrames === 'number' && isFinite(totalFrames);\n\n    const totalFramesFromDuration = hasDuration ? Math.floor(fps * duration) : undefined;\n    const durationFromTotalFrames = hasTotalFrames ? (totalFrames / fps) : undefined;\n    if (hasDuration && hasTotalFrames && totalFramesFromDuration !== totalFrames) {\n      throw new Error('You should specify either duration or totalFrames, but not both. Or, they must match exactly.');\n    }\n\n    if (typeof settings.dimensions === 'undefined' && typeof settings.units !== 'undefined') {\n      console.warn(`You've specified a { units } setting but no { dimension }, so the units will be ignored.`);\n    }\n\n    totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n    duration = defined(duration, durationFromTotalFrames, Infinity);\n\n    const startTime = settings.time;\n    const startFrame = settings.frame;\n    const hasStartTime = typeof startTime === 'number' && isFinite(startTime);\n    const hasStartFrame = typeof startFrame === 'number' && isFinite(startFrame);\n\n    // start at zero unless user specifies frame or time (but not both mismatched)\n    let time = 0;\n    let frame = 0;\n    let playhead = 0;\n    if (hasStartTime && hasStartFrame) {\n      throw new Error('You should specify either start frame or time, but not both.');\n    } else if (hasStartTime) {\n      // User specifies time, we infer frames from FPS\n      time = startTime;\n      playhead = this._computePlayhead(time, duration);\n      frame = this._computeFrame(\n        playhead, time,\n        totalFrames, fps\n      );\n    } else if (hasStartFrame) {\n      // User specifies frame number, we infer time from FPS\n      frame = startFrame;\n      time = frame / fps;\n      playhead = this._computePlayhead(time, duration);\n    }\n\n    return {\n      playhead,\n      time,\n      frame,\n      duration,\n      totalFrames,\n      fps,\n      timeScale\n    };\n  }\n\n  setup (settings = {}) {\n    if (this.sketch) throw new Error('Multiple setup() calls not yet supported.');\n\n    this._settings = Object.assign({}, settings, this._settings);\n\n    checkSettings(this._settings);\n\n    // Get initial canvas & context\n    const { context, canvas } = createCanvas(this._settings);\n\n    const timeProps = this.getTimeProps(this._settings);\n\n    // Initial render state features\n    this._props = {\n      ...timeProps,\n      canvas,\n      context,\n      deltaTime: 0,\n      started: false,\n      exporting: false,\n      playing: false,\n      recording: false,\n      settings: this.settings,\n      data: this.settings.data,\n\n      // Export some specific actions to the sketch\n      render: () => this.render(),\n      togglePlay: () => this.togglePlay(),\n      dispatch: (cb) => this.dispatch(cb),\n      tick: () => this.tick(),\n      resize: () => this.resize(),\n      update: (opt) => this.update(opt),\n      exportFrame: opt => this.exportFrame(opt),\n      record: () => this.record(),\n      play: () => this.play(),\n      pause: () => this.pause(),\n      stop: () => this.stop()\n    };\n\n    // For WebGL sketches, a gl variable reads a bit better\n    this._setupGLKey();\n\n    // Trigger initial resize now so that canvas is already sized\n    // by the time we load the sketch\n    this.resize();\n  }\n\n  loadAndRun (canvasSketch, newSettings) {\n    return this.load(canvasSketch, newSettings).then(() => {\n      this.run();\n      return this;\n    });\n  }\n\n  unload () {\n    this.pause();\n    if (!this.sketch) return;\n    if (typeof this.sketch.unload === 'function') {\n      this._wrapContextScale(props => this.sketch.unload(props));\n    }\n    this._sketch = null;\n  }\n\n  destroy () {\n    this.unload();\n    this.unmount();\n  }\n\n  load (createSketch, newSettings) {\n    // User didn't specify a function\n    if (typeof createSketch !== 'function') {\n      throw new Error('The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)');\n    }\n\n    if (this.sketch) {\n      this.unload();\n    }\n\n    if (typeof newSettings !== 'undefined') {\n      this.update(newSettings);\n    }\n\n    // This is a bit of a tricky case; we set up the auto-scaling here\n    // in case the user decides to render anything to the context *before* the\n    // render() function... However, users should instead use begin() function for that.\n    this._preRender();\n\n    let preload = Promise.resolve();\n\n    // Because of P5.js's unusual structure, we have to do a bit of\n    // library-specific changes to support it properly.\n    if (this.settings.p5) {\n      if (!isBrowser()) {\n        throw new Error('[canvas-sketch] ERROR: Using p5.js in Node.js is not supported');\n      }\n      preload = new Promise(resolve => {\n        let P5Constructor = this.settings.p5;\n        let preload;\n        if (P5Constructor.p5) {\n          preload = P5Constructor.preload;\n          P5Constructor = P5Constructor.p5;\n        }\n\n        // The sketch setup; disable loop, set sizing, etc.\n        const p5Sketch = p5 => {\n          // Hook in preload if necessary\n          if (preload) p5.preload = () => preload(p5);\n          p5.setup = () => {\n            const props = this.props;\n            const isGL = this.settings.context === 'webgl';\n            const renderer = isGL ? p5.WEBGL : p5.P2D;\n            p5.noLoop();\n            p5.pixelDensity(props.pixelRatio);\n            p5.createCanvas(props.viewportWidth, props.viewportHeight, renderer);\n            if (isGL && this.settings.attributes) {\n              p5.setAttributes(this.settings.attributes);\n            }\n\n            this.update({ p5, canvas: p5.canvas, context: p5._renderer.drawingContext });\n            resolve();\n          };\n        };\n\n        // Support global and instance P5.js modes\n        if (typeof P5Constructor === 'function') {\n          new P5Constructor(p5Sketch);\n        } else {\n          if (typeof window.createCanvas !== 'function') {\n            throw new Error(\"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\");\n          }\n          p5Sketch(window);\n        }\n      });\n    }\n\n    return preload.then(() => {\n      // Load the user's sketch\n      let loader = createSketch(this.props);\n      if (!isPromise(loader)) {\n        loader = Promise.resolve(loader);\n      }\n      return loader;\n    }).then(sketch => {\n      if (!sketch) sketch = {};\n      this._sketch = sketch;\n\n      // Once the sketch is loaded we can add the events\n      if (isBrowser()) {\n        this._keyboardShortcuts.attach();\n        window.addEventListener('resize', this._resizeHandler);\n      }\n\n      this._postRender();\n\n      // The initial resize() in the constructor will not have\n      // triggered a resize() event on the sketch, since it was before\n      // the sketch was loaded. So we send the signal here, allowing\n      // users to react to the initial size before first render.\n      this._sizeChanged();\n      return this;\n    }).catch(err => {\n      console.warn('Could not start sketch, the async loading function rejected with an error:\\n    Error: ' + err.message);\n      throw err;\n    });\n  }\n}\n\nexport default SketchManager;\n","import { getClientAPI } from '../util';\n\nexport default function (opt = {}) {\n  const handler = ev => {\n    if (!opt.enabled()) return;\n\n    const client = getClientAPI();\n    if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + S\n      ev.preventDefault();\n      opt.save(ev);\n    } else if (ev.keyCode === 32) {\n      // Space\n      // TODO: what to do with this? keep it, or remove it?\n      opt.togglePlay(ev);\n    } else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + K, only when canvas-sketch-cli is used\n      ev.preventDefault();\n      opt.commit(ev);\n    }\n  };\n\n  const attach = () => {\n    window.addEventListener('keydown', handler);\n  };\n\n  const detach = () => {\n    window.removeEventListener('keydown', handler);\n  };\n\n  return {\n    attach,\n    detach\n  };\n}\n","import SketchManager from './core/SketchManager';\nimport PaperSizes from './paper-sizes';\nimport { getClientAPI, defined } from './util';\n\nconst CACHE = 'hot-id-cache';\nconst runtimeCollisions = [];\n\nfunction isHotReload () {\n  const client = getClientAPI();\n  return client && client.hot;\n}\n\nfunction cacheGet (id) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  return client[CACHE][id];\n}\n\nfunction cachePut (id, data) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  client[CACHE][id] = data;\n}\n\nfunction getTimeProp (oldManager, newSettings) {\n  // Static sketches ignore the time persistency\n  return newSettings.animate ? { time: oldManager.props.time } : undefined;\n}\n\nfunction canvasSketch (sketch, settings = {}) {\n  if (settings.p5) {\n    if (settings.canvas || (settings.context && typeof settings.context !== 'string')) {\n      throw new Error(`In { p5 } mode, you can't pass your own canvas or context, unless the context is a \"webgl\" or \"2d\" string`);\n    }\n\n    // Do not create a canvas on startup, since P5.js does that for us\n    const context = typeof settings.context === 'string' ? settings.context : false;\n    settings = Object.assign({}, settings, { canvas: false, context });\n  }\n\n  const isHot = isHotReload();\n  let hotID;\n  if (isHot) {\n    // Use a magic name by default, force user to define each sketch if they\n    // require more than one in an application. Open to other ideas on how to tackle\n    // this as well...\n    hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n  }\n  let isInjecting = isHot && typeof hotID === 'string';\n\n  if (isInjecting && runtimeCollisions.includes(hotID)) {\n    console.warn(`Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. `, hotID);\n    isInjecting = false;\n  }\n\n  let preload = Promise.resolve();\n\n  if (isInjecting) {\n    // Mark this as already spotted in this runtime instance\n    runtimeCollisions.push(hotID);\n\n    const previousData = cacheGet(hotID);\n    if (previousData) {\n      const next = () => {\n        // Grab new props from old sketch instance\n        const newProps = getTimeProp(previousData.manager, settings);\n        // Destroy the old instance\n        previousData.manager.destroy();\n        // Pass along new props\n        return newProps;\n      };\n\n      // Move along the next data...\n      preload = previousData.load.then(next).catch(next);\n    }\n  }\n\n  return preload.then(newProps => {\n    const manager = new SketchManager();\n    let result;\n    if (sketch) {\n      // Merge with incoming data\n      settings = Object.assign({}, settings, newProps);\n\n      // Apply settings and create a canvas\n      manager.setup(settings);\n\n      // Mount to DOM\n      manager.mount();\n\n      // load the sketch first\n      result = manager.loadAndRun(sketch);\n    } else {\n      result = Promise.resolve(manager);\n    }\n    if (isInjecting) {\n      cachePut(hotID, { load: result, manager });\n    }\n    return result;\n  });\n}\n\n// TODO: Figure out a nice way to export things.\ncanvasSketch.canvasSketch = canvasSketch;\ncanvasSketch.PaperSizes = PaperSizes;\n\nexport default canvasSketch;\n","import { easeInOutQuint } from '../utils/easing';\r\nimport fadeOutOpacity from '../utils/fadeOutOpacity';\r\n\r\nclass Line {\r\n  constructor() {\r\n    this.start = 1400;\r\n    this.finish = this.start + Math.random() * 500;\r\n    this.angle = Math.random() * 2 * Math.PI;\r\n    this.offset = Math.random();\r\n  }\r\n\r\n  draw(context, playhead) {\r\n    // Range: [1, 0]\r\n    // Expr: 1 - playhead\r\n\r\n    // Range [1 + offset, offset]\r\n    // Expr: 1 - playhead + this.offset\r\n\r\n    // Range [offset, offset]\r\n    // (1 - playhead + this.offset) % 1\r\n    const progress = easeInOutQuint((1 - playhead + this.offset) % 1);\r\n    let opacity = fadeOutOpacity(progress, 0.5);\r\n\r\n    context.beginPath();\r\n    context.strokeStyle = `rgba(255, 255, 255, ${opacity})`;\r\n    context.lineWidth = 2;\r\n    context.moveTo(this.start * progress, 0);\r\n    context.lineTo(this.finish * progress, 0);\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nexport default Line;\r\n","import { easeInOutQuint } from '../utils/easing';\r\nimport fadeOutOpacity from '../utils/fadeOutOpacity';\r\n\r\nclass Shape {\r\n  constructor(x, y, radius = 3) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.offset = Math.random();\r\n    this.verticesCount = 3 + Math.floor(Math.random() * 4);\r\n    this.verticesCoords = [];\r\n\r\n    let angle, vx, vy;\r\n    for (let i = 0; i < this.verticesCount; i++) {\r\n      angle = i * 2 * Math.PI / this.verticesCount + this.offset * Math.PI * 2;\r\n      vx = this.x + Math.sin(angle) * radius;\r\n      vy = this.y + Math.cos(angle) * radius;\r\n\r\n      this.verticesCoords.push([vx, vy]);\r\n    }\r\n  }\r\n\r\n  draw(context, playhead) {\r\n    const progress = easeInOutQuint((1 - playhead + this.offset) % 1);\r\n    let realProgress = 1\r\n    const [startX, startY] = this.verticesCoords[0];\r\n    let opacity = 0;\r\n\r\n    if (progress > 0.9) {\r\n      // fade in [0, 1]\r\n      const ratio = (1 - progress) / 0.03\r\n      opacity = ratio > 1 ? 1 : ratio;\r\n    } else {\r\n      realProgress = progress / 0.9;\r\n      opacity = realProgress;\r\n    }\r\n\r\n    context.strokeStyle = `rgba(255, 255, 255, ${opacity})`;\r\n    context.beginPath();\r\n    context.moveTo(startX * realProgress, startY * realProgress);\r\n\r\n    for (let i = 1; i < this.verticesCoords.length; i++) {\r\n      let [x, y] = this.verticesCoords[i];\r\n      context.lineTo(x * realProgress, y * realProgress)\r\n    }\r\n\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nexport default Shape;\r\n","const arrayFrom = (creator, length) => Array.from(\r\n  { length },\r\n  creator\r\n)\r\n\r\nexport default arrayFrom;\r\n","// acceleration until halfway, then deceleration \r\nexport const easeInOutQuint = t => t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t\r\n","const fadeOutOpacity = (progress, boundary) =>\r\n  progress < boundary ? progress / boundary : 1\r\n\r\nexport default fadeOutOpacity;\r\n","const getImageData = ({ imageUrl, precision }) => {\r\n  const imageData = Array.from(Array(precision), () => new Array(precision));\r\n  const imgCanvas = document.createElement('canvas');\r\n\r\n  imgCanvas.width = precision;\r\n  imgCanvas.height = precision;\r\n  imgCanvas.style.display = 'none';\r\n\r\n  document.body.appendChild(imgCanvas);\r\n\r\n  const context = imgCanvas.getContext('2d');\r\n  const image = new Image();\r\n\r\n  image.src = imageUrl;\r\n\r\n\r\n  return new Promise(resolve => {\r\n    image.onload = function () {\r\n      context.drawImage(image, 0, 0, precision, precision);\r\n  \r\n      const { data } = context.getImageData(0, 0, precision, precision);\r\n  \r\n      let x, y;\r\n      for (let i = 0; i < data.length; i += 4) {\r\n        x = (i / 4) % precision;\r\n        y = Math.floor((i / 4) / precision);\r\n        imageData[x][y] = data[i];\r\n      }\r\n\r\n      resolve(imageData);\r\n    }\r\n  });\r\n}\r\n\r\nexport default getImageData;\r\n","\nglobal.CANVAS_SKETCH_DEFAULT_STORAGE_KEY = window.location.href;\n"]}